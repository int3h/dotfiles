#!/usr/bin/env bash

# Prints output of `lastlog` in a prettier way (as in pam_lastlog.so)

# Last login: Fri Jul  4 15:10:06 2014 from 67.164.93.223
# mtorok           pts/0    67.164.93.223    Fri Jul  4 15:46:42 -0700 20

lastlogin_raw="$(lastlog -u "$USER" | tail -n 1)"

last_ip="$(echo "$lastlogin_raw" | awk '{print $3}' )"
last_time="$(echo "$lastlogin_raw" | awk '{print substr($0, index($0, $4))}')"
last_formatted_time="$(date --d="$last_time" +%c)"

printf 'Last login: %s from %s\n' "$last_formatted_time" "$last_ip"
